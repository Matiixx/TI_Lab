<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Lab12</title>

    <link rel="stylesheet" href="../enlighterjs.css" />
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <header>
        <a href="http://pascal.fis.agh.edu.pl/~0cichostepski">
            <h2>Strona główna</h2>
        </a>
    </header>
    <main>
        <div class="content">
            <div style="margin-bottom: 100px; margin-top: 50px">
                <a href="./client.html" target="_blank">
                    <h2>Zadanie REST PHP <i class="fa-solid fa-up-right-from-square"></i></h2>
                </a>
            </div>

            <div class="code-container">
                <p class="file-p">
                    <a href="./api.txt" target="_blank">api.php</a>
                </p>
                <pre class="codeblock" src="./api.txt" code="php"></pre>
            </div>

            <div class="code-container">
                <p class="file-p">
                    <a href="./mongo.txt" target="_blank">mongo.txt</a>
                </p>
                <pre class="codeblock" src="./mongo.txt" code="php"></pre>
            </div>

            <div class="code-container">
                <p class="file-p">
                    <a href="./rest.txt" target="_blank">rest.txt</a>
                </p>
                <pre class="codeblock" src="./rest.txt" code="js"></pre>
            </div>

        </div>
    </main>

    <script type="text/javascript" src="../enlighterjs.js"></script>

    <script type="text/javascript">
        const fetchCode = (src) => fetch(src).then((response) => response.text());

        function writeCode(src, elem, language) {
            fetchCode(src).then((data) => {
                elem.innerHTML = data;
                EnlighterJS.enlight(elem, {
                    language: language,
                    theme: "atomic",
                    textOverflow: "scroll",
                });
            });
        }

        let elems = document.querySelectorAll(".codeblock");

        elems.forEach((elem) => {
            let src = elem.getAttribute("src");
            let type = elem.getAttribute("code");
            writeCode(src, elem, type);
        });
    </script>
</body>

</html>